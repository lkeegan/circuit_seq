import{d as $,u as E,r as t,c as k,a as f,b as N,w as u,I as S,e as n,f as P,g as z,o as c,h as i,F as V,i as e,t as w,j as g,v as m,k as C}from"./index.137fa811.js";const D=e("i",{class:"bi-person"},null,-1),F=e("p",null,"You are currently logged in as:",-1),I={class:"purple"},M=e("p",null,"Log in with the email address and password you used to sign up:",-1),T=e("i",{class:"bi-person-plus"},null,-1),Z=e("p",null,"If you don't yet have an account, you can create one by entering your Heidelberg Uni, EMBL or DKFZ email address and choosing a password:",-1),j=["title"],A=["title"],H=["disabled"],q=$({__name:"LoginView",setup(K){const o=E(),r=t(""),_=t(""),v=t("");function L(l){var s=/\S+@((\S*heidelberg)|embl|dkfz)\.de$/;return s.test(l)}function U(l){var s=/^(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9]).{8,}$/;return s.test(l)}const d=t(""),b=k(()=>L(d.value)?"":"Please use a heidelberg, dkfz or embl email address."),p=t(""),y=k(()=>U(p.value)?"":"Password needs at least 8 chars, including lower-case, upper-case and a number."),h=t("");function x(){C.post("login",{email:r.value,password:_.value}).then(l=>{console.log("Login successful"),v.value="",o.email=r.value,o.token=l.data.access_token}).catch(l=>{v.value=`Login failed: ${l.response.data}`})}function B(){C.post("signup",{email:d.value,password:p.value}).then(l=>{console.log("Signup successful"),h.value="Signup successful, you can now login!"}).catch(l=>{h.value=`Signup failed: ${l.response.data}`})}return(l,s)=>(c(),f("main",null,[N(S,null,{icon:u(()=>[D]),heading:u(()=>[i("My account")]),default:u(()=>[n(o).email.length>0?(c(),f(V,{key:0},[F,e("p",I,w(n(o).email),1),e("p",null,[e("button",{onClick:s[0]||(s[0]=a=>{n(o).email="",r.value="",n(o).token=""})}," Logout ")])],64)):(c(),f(V,{key:1},[M,e("p",null,[i("Email: "),g(e("input",{"onUpdate:modelValue":s[1]||(s[1]=a=>r.value=a),placeholder:"your.name@uni-heidelberg.de"},null,512),[[m,r.value]])]),e("p",null,[i("Password: "),g(e("input",{"onUpdate:modelValue":s[2]||(s[2]=a=>_.value=a),type:"password"},null,512),[[m,_.value]])]),e("p",null,w(v.value),1),e("p",null,[e("button",{onClick:x},"Login")])],64))]),_:1}),n(o).email.length===0?(c(),P(S,{key:0},{icon:u(()=>[T]),heading:u(()=>[i("Sign up")]),default:u(()=>[Z,e("p",null,[i("Email: "),g(e("input",{"onUpdate:modelValue":s[3]||(s[3]=a=>d.value=a),placeholder:"your.name@uni-heidelberg.de",title:n(b)},null,8,j),[[m,d.value]])]),e("p",null,[i("Password: "),g(e("input",{"onUpdate:modelValue":s[4]||(s[4]=a=>p.value=a),type:"password",placeholder:"password",title:n(y)},null,8,A),[[m,p.value]])]),e("p",null,w(h.value),1),e("p",null,[e("button",{onClick:B,disabled:n(b).length+n(y).length>0},"Sign up",8,H)])]),_:1})):z("",!0)]))}});export{q as default};
